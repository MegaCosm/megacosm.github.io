(window.webpackJsonpMegacosmDoc=window.webpackJsonpMegacosmDoc||[]).push([[49],{1043:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(488),l=n(489),d=n(45),r=n(1044),r=n.n(r),s=Object(d.a)(r.a),o=[{name:"01-base",title:Object(d.a)("Base \n Basic usage of TreeSelect."),component:n(1045).default,rawText:n(1046)},{name:"02-mutiple",title:Object(d.a)("Multiple \n Set multiple to Multiple choices."),component:n(1047).default,rawText:n(1048)},{name:"03-filter",title:Object(d.a)("Filter \n OnFilter is a function to filter data."),component:n(1049).default,rawText:n(1050)},{name:"04-disabled",title:Object(d.a)("Disabled \n Set disabled to disabled item."),component:n(1051).default,rawText:n(1052)},{name:"05-loader",title:Object(d.a)("Lazy load \n Set the loader function to dynamic fetch data. This function is triggered when the undefined child node is expanded."),component:n(1053).default,rawText:n(1054)}];t.default=Object(i.a)(function(e){return a.a.createElement(l.b,Object.assign({},e,{codes:void 0,source:s,examples:o}))})},1044:function(e,t){e.exports="# TreeSelect\r\n\r\n<example />\r\n\r\n## API\r\n\r\n| Property | Type | Default | Description |\r\n| --- | --- | --- | --- |\r\n| width | number | null | width |\r\n| clearable | boolean | false | If clearable is true, show clear value icon |\r\n| multiple | boolean | false | if it is true, it will be multiple selection |\r\n| data | any[] | [] | data. The child node is children. If the children value is null or its length is 0, it is render as a leaf node. |\r\n| value | string \\| string[] | | In the Form, the value will be taken over by the form and the value will be invalid. |\r\n| defaultValue | string \\| string[] | | Initial value |\r\n| defaultExpanded | string[] | - | Default expanded node key. |\r\n| disabled | (data: object) => boolean \\| boolean | false | When it is true, all nodes disable the selection; when it is a function, it determines whether it is disabled according to the return result of the function. |\r\n| filterDelay | number | 400 | ms. The delay of user input triggering filter events |\r\n| name | string | - | The name of a Form that accesses data |\r\n| keygen | ((data: object) => string) \\| string \\| true | index | Generate a auxiliary method for each key<br />If not filled, index will be used(not recommended,there may be problems with more than 10 data)<br />When it is a function, use its return value.<br />When it is a stringï¼Œues the value of the string.For example, 'id' is the same thing as (d) => d.id. |\r\n| expanded | string[] | - | Expanded node key (controlled) |\r\n| loader | (key: string) => void | - | If the loader attribute is a function, the node with no children is regarded as dynamically loaded node. Click expanded button to trigger the loader event. The children property is null or its length is 0 will be regarded as a leaf node. |\r\n| mode | 0 \\| 1 \\| 2 \\| 3 | 1 | mode <br />0: Returns only the fully selected node including the parent node. <br />1: Returns all selected nodes and semi-selected nodes. <br />2: Return only the selected child nodes. <br />3: If the parent node is full selected, only return the parent node. |\r\n| onExpand | (expanded: string[]) => void | - | The callback function for expanding the node. The parameter is the key array of the currently expanded nodes. |\r\n| onChange | (value: string[]) => void | - | value is your picker now |\r\n| onFilter | (text: string) => (data: any) => boolean | - | When the onFilter is not empty, you can filter data by input.<br />If the onFilter returns a function, use this function as a front-end filter.<br />If return undefined, you can do your own backend filtering. |\r\n| renderItem | (data: object) => ReactNode | required | When it is a string, return d\\[string]<br />When it is a function, return the result of the function. |\r\n| renderResult | (data: object) => ReactNode | renderItem | The content displayed in the result after selecting, if not set, use renderItem |\r\n| compressed | boolean \\| 'no-repeat' | false | Merges selected values, valid only in multiselect mode; the first value will not appear in the Popover when it is'no-repeat'. |\r\n| absolute | boolean | false | When it is true, the pop-up layer of option append into document.body. |\r\n| zIndex | number | 1000 | options z-index |\r\n| childrenKey | string | 'children' | the key of the children data name | \r\n| defaultExpandAll | boolean | false | default expand all node |\r\n| showHitDescendants | boolean | false | Whether to show the descendant nodes of the hit node after filtering |\r\n| renderUnmatched | (data: any) => ReactNode | none | render unmatched value |\r\n| onCollapse | (collapse: boolean) => void | none | option collapse callback |\r\n| rules | any[] | null | Validation rules |\r\n| unmatch | boolean | none | render unmatch value |\r\n"},1045:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var a=n(4),i=n(5),l=n(6),d=n(7),t=n(0),s=n.n(t),o=n(301),c=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]}],r=function(e){Object(l.a)(r,e);var n=Object(d.a)(r);function r(e){var t;return Object(a.a)(this,r),(t=n.call(this,e)).handleChange=function(e){t.setState({value:e})},t.state={value:""},t}return Object(i.a)(r,[{key:"render",value:function(){return s.a.createElement(o.a,{value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c})}}]),r}(s.a.Component)},1046:function(e,t){e.exports="/**\r\n * - Base\r\n *    -- Basic usage of TreeSelect.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: '',\r\n    }\r\n  }\r\n\r\n  handleChange = v => {\r\n    this.setState({\r\n      value: v,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TreeSelect\r\n        value={this.state.value}\r\n        onChange={this.handleChange}\r\n        clearable\r\n        style={{ width: 250 }}\r\n        keygen=\"id\"\r\n        renderItem={node => `node ${node.title}`}\r\n        data={data}\r\n      />\r\n    )\r\n  }\r\n}\r\n"},1047:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var a=n(4),i=n(5),l=n(6),d=n(7),t=n(0),s=n.n(t),o=n(301),c=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]}],r=function(e){Object(l.a)(r,e);var n=Object(d.a)(r);function r(e){var t;return Object(a.a)(this,r),(t=n.call(this,e)).handleChange=function(e){t.setState({value:e})},t.state={value:[]},t}return Object(i.a)(r,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(o.a,{multiple:!0,value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250,marginBottom:15},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c}),s.a.createElement("br",null),s.a.createElement(o.a,{compressed:!0,multiple:!0,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c}))}}]),r}(s.a.Component)},1048:function(e,t){e.exports="/**\r\n * - Multiple\r\n *    -- Set multiple to Multiple choices.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: [],\r\n    }\r\n  }\r\n\r\n  handleChange = v => {\r\n    this.setState({\r\n      value: v,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TreeSelect\r\n          multiple\r\n          value={this.state.value}\r\n          onChange={this.handleChange}\r\n          clearable\r\n          style={{ width: 250, marginBottom: 15 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n        <br />\r\n        <TreeSelect\r\n          compressed\r\n          multiple\r\n          clearable\r\n          style={{ width: 250 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"},1049:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var a=n(29),i=n(4),l=n(5),d=n(2),s=n(6),o=n(7),t=n(0),c=n.n(t),u=n(301),h=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]},{id:"4",title:"4",children:[{id:"4-1",title:"4-1"}]},{id:"5",title:"5",children:[{id:"5-1",title:"5-1"}]}],r=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).handleChange=function(e,t){n.setState(Object(a.a)({},e,t))},n.handleFilter=function(t){return function(e){return-1<e.title.indexOf(t)}},n.state={single:"",multiple:[]},n.handleChangeSingle=n.handleChange.bind(Object(d.a)(n),"single"),n.handleChangeMultiple=n.handleChange.bind(Object(d.a)(n),"multiple"),n}return Object(l.a)(r,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(u.a,{onFilter:this.handleFilter,value:this.state.single,onChange:this.handleChangeSingle,clearable:!0,style:{width:250,marginBottom:20},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:h}),c.a.createElement("br",null),c.a.createElement(u.a,{multiple:!0,onFilter:this.handleFilter,value:this.state.multiple,onChange:this.handleChangeMultiple,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:h}))}}]),r}(c.a.Component)},1050:function(e,t){e.exports="/**\r\n * - Filter\r\n *    -- OnFilter is a function to filter data.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\r\n  { id: '4', title: '4', children: [{ id: '4-1', title: '4-1' }] },\r\n  { id: '5', title: '5', children: [{ id: '5-1', title: '5-1' }] },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      single: '',\r\n      multiple: [],\r\n    }\r\n\r\n    this.handleChangeSingle = this.handleChange.bind(this, 'single')\r\n    this.handleChangeMultiple = this.handleChange.bind(this, 'multiple')\r\n  }\r\n\r\n  handleChange = (key, v) => {\r\n    this.setState({\r\n      [key]: v,\r\n    })\r\n  }\r\n\r\n  handleFilter = text => d => d.title.indexOf(text) > -1\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TreeSelect\r\n          onFilter={this.handleFilter}\r\n          value={this.state.single}\r\n          onChange={this.handleChangeSingle}\r\n          clearable\r\n          style={{ width: 250, marginBottom: 20 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n        <br />\r\n        <TreeSelect\r\n          multiple\r\n          onFilter={this.handleFilter}\r\n          value={this.state.multiple}\r\n          onChange={this.handleChangeMultiple}\r\n          clearable\r\n          style={{ width: 250 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"},1051:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var a=n(4),i=n(5),l=n(6),d=n(7),t=n(0),s=n.n(t),o=n(301),c=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"},{id:"3-2",title:"3-2"}]}],r=function(e){Object(l.a)(r,e);var n=Object(d.a)(r);function r(e){var t;return Object(a.a)(this,r),(t=n.call(this,e)).handleChange=function(e){t.setState({value:e})},t.state={value:""},t}return Object(i.a)(r,[{key:"render",value:function(){return s.a.createElement(o.a,{absolute:!0,disabled:function(e){return e.title.startsWith("2-")},value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c})}}]),r}(s.a.Component)},1052:function(e,t){e.exports="/**\r\n * - Disabled\r\n *    -- Set disabled to disabled item.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '3',\r\n    title: '3',\r\n    children: [\r\n      { id: '3-1', title: '3-1' },\r\n      { id: '3-2', title: '3-2' },\r\n    ],\r\n  },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: '',\r\n    }\r\n  }\r\n\r\n  handleChange = v => {\r\n    this.setState({\r\n      value: v,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TreeSelect\r\n        absolute\r\n        disabled={v => v.title.startsWith('2-')}\r\n        value={this.state.value}\r\n        onChange={this.handleChange}\r\n        clearable\r\n        style={{ width: 250 }}\r\n        keygen=\"id\"\r\n        renderItem={node => `node ${node.title}`}\r\n        data={data}\r\n      />\r\n    )\r\n  }\r\n}\r\n"},1053:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var a=n(4),i=n(5),l=n(6),d=n(7),t=n(0),s=n.n(t),o=n(44),c=n(301),u=["0","1","2","3","4"].map(function(e){return{id:e}}),h=0,r=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).loader=function(t){setTimeout(function(){n.setState(Object(o.a)(function(e){e.data[parseInt(t,10)].children=Array(6).fill(0).map(function(){return{id:"-".concat(h++),children:[]}})}))},500)},n.handleChange=function(e){return n.setState({value:e})},n.renderItem=function(e){return"node ".concat(e.id)},n.state={data:u,value:[]},n}return Object(i.a)(r,[{key:"render",value:function(){return s.a.createElement(c.a,{multiple:!0,loader:this.loader,value:this.state.value,onChange:this.handleChange,keygen:"id",renderItem:this.renderItem,data:this.state.data})}}]),r}(t.Component)},1054:function(e,t){e.exports="/**\r\n * - Lazy load\r\n *    -- Set the loader function to dynamic fetch data. This function is triggered when the undefined child node is expanded.\r\n */\r\nimport React, { Component } from 'react'\r\nimport immer from 'immer'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst initData = ['0', '1', '2', '3', '4'].map(i => ({ id: i }))\r\n\r\nlet index = 0\r\nexport default class extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { data: initData, value: [] }\r\n  }\r\n\r\n  loader = key => {\r\n    setTimeout(() => {\r\n      this.setState(\r\n        immer(draft => {\r\n          const { data } = draft\r\n          data[parseInt(key, 10)].children = Array(6)\r\n            .fill(0)\r\n            .map(() => ({ id: `-${index++}`, children: [] }))\r\n        })\r\n      )\r\n    }, 500)\r\n  }\r\n\r\n  handleChange = value => this.setState({ value })\r\n\r\n  renderItem = node => `node ${node.id}`\r\n\r\n  render() {\r\n    return (\r\n      <TreeSelect\r\n        multiple\r\n        loader={this.loader}\r\n        value={this.state.value}\r\n        onChange={this.handleChange}\r\n        keygen=\"id\"\r\n        renderItem={this.renderItem}\r\n        data={this.state.data}\r\n      />\r\n    )\r\n  }\r\n}\r\n"},301:function(e,t,n){"use strict";var r=n(46),a=n(20),i=n(66),h=n(1),l=n(4),d=n(5),s=n(2),o=n(26),c=n(21),u=n(6),p=n(7),m=n(14),f=n(0),b=n.n(f),v=n(117),g=n(19),y=n(22),O=n(24),j=n(83),C=n(15),k=n.n(C),x=n(11),I=n(30),E=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(l.a)(this,n),(e=t.call(this,e)).bindElement=e.bindElement.bind(Object(s.a)(e)),e.handleInput=e.handleInput.bind(Object(s.a)(e)),e.props.setInputReset(e.reset.bind(Object(s.a)(e))),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.focus&&this.focus()}},{key:"shouldComponentUpdate",value:function(){return this.props.updatAble}},{key:"componentDidUpdate",value:function(e){this.props.focus!==e.focus&&this.props.focus&&this.focus()}},{key:"reset",value:function(){this.editElement&&(this.editElement.innerText=""),this.blurTimer&&clearTimeout(this.blurTimer)}},{key:"focus",value:function(){I.focusElement.select(this.editElement)}},{key:"bindElement",value:function(e){this.editElement=e}},{key:"handleInput",value:function(e){this.props.onFilter(e.target.innerText.replace("\feff ","").trim())}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.focus,e=e.multiple,t="string"==typeof t?t.replace(/<\/?[^>]*>/g,""):t;return Object(f.isValidElement)(t)?Object(f.cloneElement)(t,{className:Object(h.N)("input"),ref:this.bindElement,key:"input",onInput:this.handleInput,contentEditable:n}):b.a.createElement("span",{key:"input",className:Object(h.N)("input",!e&&"full"),ref:this.bindElement,contentEditable:n,onInput:this.handleInput,onBlur:this.handleBlur,dangerouslySetInnerHTML:{__html:t}})}}]),n}(f.Component);E.defaultProps={text:"",updatAble:!1};function w(e,t,n){return Object(x.isObject)(e)&&e.IS_NOT_MATCHED_VALUE?"function"==typeof n?n(e.value):Object(x.isObject)(e.value)?t(e.value):e.value:t(e)}var S=E,T=n(102),F=n(172);function N(e){var t=e.content,n=e.data,r=e.disabled,a=e.onClick,i=n,e=r||!a?void 0:function(){return a(i)},n=r||!e;return b.a.createElement("a",{tabIndex:-1,className:Object(h.N)("item",r&&"disabled",n&&"ban")},t,!n&&b.a.createElement("span",{className:Object(h.N)("indicator","close"),onClick:e}))}function R(e,t){return e.getAttribute("data-id")===t||!!e.parentElement&&R(e.parentElement,t)}var D=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(l.a)(this,n),(e=t.call(this,e)).state={more:!1},e.handleRemove=e.handleRemove.bind(Object(s.a)(e)),e.handelMore=e.handelMore.bind(Object(s.a)(e)),e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.result;e.compressed&&t.length<=1&&(this.state.more=!1)}},{key:"handleRemove",value:function(){this.props.onRemove.apply(void 0,arguments)}},{key:"handelMore",value:function(e){this.setState({more:e})}},{key:"renderClear",value:function(){var e=this.props,t=e.onClear,n=e.result,e=e.disabled;return t&&0<n.length&&!0!==e?b.a.createElement("a",{tabIndex:-1,"data-role":"close",className:Object(h.N)("indicator","close"),onClick:t}):null}},{key:"renderInput",value:function(e){var t=this.props,n=t.multiple,r=t.onFilter,a=t.focus,t=t.setInputReset;return b.a.createElement(S,{key:"".concat(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"input",".").concat(a?1:0),updatAble:!n,multiple:n,focus:a,text:e,onFilter:r,setInputReset:t})}},{key:"renderItem",value:function(e,t,n){var r=this.props,a=r.renderResult,i=r.renderUnmatched,r=r.datum,i=w(e,a,i);return null===i?null:b.a.createElement(N,{key:n,content:i,data:e,disabled:r.disabled(e),onClick:t?this.handleRemove:void 0})}},{key:"renderMore",value:function(e){var t=this.props.compressed,n=Object(j.a)(e),e=n[0],n=n.slice(1);return[e,b.a.createElement(F.a,{key:"more",className:Object(h.N)("item","item-compressed"),popoverClassName:Object(h.N)("popover"),contentClassName:Object(h.N)("result"),compressed:t,data:[b.a.cloneElement(e,{onClick:this.handleRemove})].concat(Object(O.a)(n)),cls:h.N})]}},{key:"renderPlaceholder",value:function(){var e=this.props,t=e.focus,e=e.onFilter;return t&&e?this.renderInput(" "):b.a.createElement("span",{className:k()(Object(h.r)("placeholder"),Object(h.N)("ellipsis"))},this.props.placeholder,"Â ")}},{key:"renderResult",value:function(){var n=this,e=this.props,t=e.multiple,r=e.compressed,a=e.result,i=e.renderResult,l=e.renderUnmatched,d=e.onFilter,s=e.focus,e=e.filterText;if(t){t=a.map(function(e,t){return n.renderItem(e,0===t&&a.length<=1||!r||0<t,t)}).filter(function(e){return!Object(x.isEmpty)(e)});return r&&1<a.length&&(t=this.renderMore(t)),s&&d&&t.push(this.renderInput(e,a.length)),t}return d?this.renderInput(w(a[0],i,l)):b.a.createElement("span",{className:Object(h.N)("ellipsis")},w(a[0],i,l))}},{key:"render",value:function(){var e=0===this.props.result.length?this.renderPlaceholder():this.renderResult(),t=this.props.compressed;return b.a.createElement("div",{className:Object(h.N)("result",t&&"compressed")},e,!this.props.multiple&&b.a.createElement("a",{tabIndex:-1,className:Object(h.N)("indicator","caret")},b.a.createElement(T.a,null)),this.renderClear())}}]),n}(f.PureComponent),C=n(78),A=n(25),E=n(54),M=n(31),B=n(16),V=["focus"],U=Object(E.a)(["fade","scale-y"],"fast"),K=Object(C.a)(function(e){var t=e.focus,e=Object(m.a)(e,V);return b.a.createElement(U,Object.assign({show:t},e))}),C=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(l.a)(this,n),(e=t.call(this,e)).state={focus:!1,position:"drop-down"},e.treeSelectId="treeSelect_".concat(Object(y.c)()),e.setInputReset=e.setInputReset.bind(Object(s.a)(e)),e.renderActive=e.renderActive.bind(Object(s.a)(e)),e.handleChange=e.handleChange.bind(Object(s.a)(e)),e.renderItem=e.renderItem.bind(Object(s.a)(e)),e.bindElement=e.bindElement.bind(Object(s.a)(e)),e.handleClick=e.handleState.bind(Object(s.a)(e),!0),e.handleFocus=e.handleFocus.bind(Object(s.a)(e)),e.handleKeyDown=e.handleKeyDown.bind(Object(s.a)(e)),e.handleBlur=e.handleState.bind(Object(s.a)(e),!1),e.handleClear=e.handleClear.bind(Object(s.a)(e)),e.handleRemove=e.handleRemove.bind(Object(s.a)(e)),e.handleClickAway=e.handleClickAway.bind(Object(s.a)(e)),e.shouldFocus=e.shouldFocus.bind(Object(s.a)(e)),e}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.onFilter,a=n.datum,n=n.mode;a.mode=n,t.focus!==this.state.focus&&!this.state.focus&&r&&setTimeout(function(){r("")},400)}},{key:"componentWillUnmount",value:function(){Object(o.a)(Object(c.a)(n.prototype),"componentWillUnmount",this).call(this),this.clearClickAway()}},{key:"getValue",value:function(){var e=this.props,t=e.datum,e=e.multiple,t=t.getValue();return e?t:t.length?t[0]:""}},{key:"getText",value:function(e){return this.props.empty||Object(M.a)(e)}},{key:"setInputReset",value:function(e){this.inputReset=e}},{key:"bindElement",value:function(e){this.element=e}},{key:"shouldFocus",value:function(e){return e.getAttribute("data-id")===this.treeSelectId||!!Object(I.getParent)(e,".".concat(Object(h.N)("result")))}},{key:"bindClickAway",value:function(){document.addEventListener("mousedown",this.handleClickAway)}},{key:"clearClickAway",value:function(){document.removeEventListener("mousedown",this.handleClickAway)}},{key:"handleClickAway",value:function(e){R(e.target,this.treeSelectId)||(this.clearClickAway(),this.props.onBlur(),this.handleState(!1,e))}},{key:"handleState",value:function(e,t){var n,r;!0!==this.props.disabled&&e!==this.state.focus&&(e&&t&&t.target.classList.contains(Object(h.N)("close"))||(n=(r=this.props).height,t=r.onCollapse,r=this.props.position,A.docSize.height<n+this.element.getBoundingClientRect().bottom&&!r&&(r="drop-up"),t&&t(e),this.setState({focus:e,position:r||"drop-down"}),e&&this.bindClickAway()))}},{key:"handleFocus",value:function(e){this.shouldFocus(e.target)&&(this.props.onFocus(e),this.bindClickAway())}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&(e.preventDefault(),this.state.focus||this.handleState(!0)),9===e.keyCode&&(this.props.onBlur(),this.state.focus?this.handleState(!1,e,!0):this.clearClickAway())}},{key:"handleRemove",value:function(e){var t=this.props.datum;t.set(t.getKey(e),0),this.handleChange()}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.datum,a=n.multiple,i=n.disabled,n=n.onChange;!0===i||r.isDisabled(t)||(i=r.getDataById(t),a||(r.setValue([]),r.set(r.getKey(e),1),this.handleState(!1)),n(this.getValue(),i,t&&r.getPath(t).path))}},{key:"handleClear",value:function(){var e=this.props.multiple;this.props.datum.setValue([]),this.props.onChange(e?[]:""),this.handleState(!1),this.element.focus()}},{key:"renderItem",value:function(e,t){var n;return"function"==typeof(n=this.props.renderItem)?n(e,t):e[n]}},{key:"renderActive",value:function(e,t,n,r){var a=this.props,i=a.renderItem,a=a.datum,i="function"==typeof i?i(e,t,n,r):e[i];return b.a.createElement("span",{title:"string"==typeof i?i:void 0,className:Object(h.N)("content-wrapper",n&&"selected",a.isDisabled(a.getKey(e))&&"disabled")},i)}},{key:"renderTreeOptions",value:function(){var t=this,e=this.state,n=e.focus,r=e.position,a=this.props,i=a.multiple,l=a.datum,d=a.data,s=a.absolute,e=a.height,a=a.zIndex,o={};["mode","data","datum","defaultExpanded","defaultExpandAll","disabled","expanded","keygen","loader","onExpand","renderItem","line","parentClickExpand","childrenKey"].forEach(function(e){o[e]=t.props[e]}),o.value=l.getValue(),i?o.onChange=this.handleChange:(o.onClick=this.handleChange,o.renderItem=this.renderActive,o.active=o.value.length?o.value[0]:null);i=0===d.length?b.a.createElement("span",{className:Object(h.N)("option")},this.getText("noData")):b.a.createElement(v.a,Object.assign({className:Object(h.N)(!i&&"single")},o,{dataUpdate:!1}));return b.a.createElement(K,{absolute:s,rootClass:Object(h.N)(r,Object(B.b)()&&"rtl"),parentElement:this.element,position:r,focus:n,"data-id":this.treeSelectId,className:Object(h.N)("options"),style:{maxHeight:e,overflowY:"auto"},fixed:"min",zIndex:a},b.a.createElement("div",{className:Object(h.N)("tree-wrapper")},i))}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.onFilter,r=e.compressed,a=e.multiple,i=e.datum,l=e.clearable,d=e.disabled,s=e.size,o=e.filterText,c=e.result,u=e.renderUnmatched,e=Object(h.N)("inner",s,this.state.focus&&"focus",this.state.position,a&&"multiple",!0===d&&"disabled"),s=this.props.renderResult||this.renderItem;return b.a.createElement("div",{tabIndex:!0===d?-1:0,ref:this.bindElement,className:e,"data-id":this.treeSelectId,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onClick:this.handleClick},b.a.createElement(D,{filterText:o,onClear:l?this.handleClear:void 0,onRemove:this.handleRemove,onFilter:n,result:c,disabled:d,datum:i,focus:this.state.focus,multiple:a,placeholder:t,renderResult:s,setInputReset:this.setInputReset,compressed:r,renderUnmatched:u}),this.renderTreeOptions())}}]),n}(g.b);C.defaultProps={clearable:!1,compressed:!1,absolute:!1,multiple:!1,line:!1,renderItem:function(e){return e},height:300,data:[],defaultExpanded:[]};var P=n(29),W=n(101),_=["data","onFilter","expanded","showHitDescendants"],z=n(17),H=n(173),L=n(34);function $(e){return e?Array.isArray(e)?e:[e]:[]}n=n(77),C=Object(a.compose)(r.a,Object(i.a)({className:Object(h.N)("_"),tag:"div"}),function(a){var e,t=e=function(e){Object(u.a)(r,e);var n=Object(p.a)(r);function r(e){var t;return Object(l.a)(this,r),(t=n.call(this,e)).datum=new H.a({data:e.data,loader:e.loader,keygen:e.keygen,mode:e.mode,value:$(e.value),onChange:e.onChange,disabled:"function"==typeof e.disabled?e.disabled:void 0,childrenKey:e.childrenKey,unmatch:e.unmatch}),t}return Object(d.a)(r,[{key:"componentDidUpdate",value:function(e){Object(L.b)(e.data,this.props.data)||(this.datum.setData(this.props.data),this.forceUpdate())}},{key:"render",value:function(){var e=this.props.value,t=Object(z.a)(Object(z.a)({},this.props),{},{datum:this.datum});return Object(L.b)($(e),this.datum.getValue())||this.datum.setValue($(e)),b.a.createElement(a,t)}}]),r}(b.a.Component);return e.defaultProps={mode:1,childrenKey:"children"},t},function(c){var e,t=e=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(l.a)(this,n),(e=t.call(this,e)).state={innerFilter:void 0,innerData:void 0,filterText:""},e.handleFilter=e.handleFilter.bind(Object(s.a)(e)),e.getResultByValues=e.getResultByValues.bind(Object(s.a)(e)),e.resultCache=new Map,e}return Object(d.a)(n,[{key:"getResultByValues",value:function(){var r=this,e=this.props,a=e.datum,i=e.noCache,e=e.renderUnmatched,t=a.getValue()||[];e&&(t=t.concat([].concat(this.props.value).filter(function(e){return e&&-1===t.indexOf(e)})));var l=[];return t.forEach(function(e){var t,n=i?void 0:r.resultCache.get(e);n||((n=a.getDataById(e))&&!i?r.resultCache.set(e,n):n||(t={},Object(P.a)(t,"IS_NOT_MATCHED_VALUE",!0),Object(P.a)(t,"value",e),n=t)),n&&l.push(n)}),l}},{key:"handleFilter",value:function(t){var n=this,e=this.props,r=e.filterDelay,a=e.onFilter;if(!t)return this.setState({filterText:"",innerFilter:void 0,innerData:void 0}),this.timer&&clearTimeout(this.timer),void(a&&a(t));a&&(this.setState({filterText:t}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var e=a(t);"function"==typeof e&&n.setState({innerFilter:e})},r))}},{key:"render",value:function(){var t=this,e=this.props,n=e.data,r=e.onFilter,a=e.expanded,i=e.showHitDescendants,l=Object(m.a)(e,_),d=this.state,s=d.innerFilter,o=d.filterText,e=r?this.handleFilter:void 0,d=n,r=a;return s&&(a=[],d=Object(W.getFilterTree)(n,s,a,function(e){return t.props.datum.getKey(e)},l.childrenKey,i),r=a),b.a.createElement(c,Object.assign({},l,{filterText:o,result:this.getResultByValues(),data:d,onFilter:e,expanded:r}))}}]),n}(g.a);return e.defaultProps={data:[],filterDelay:300,showHitDescendants:!1},t},n.b)(C);C.displayName="MegacosmTreeSelect";t.a=C}}]);