(window.webpackJsonpMegacosmDoc=window.webpackJsonpMegacosmDoc||[]).push([[51],{1057:function(o,e,t){"use strict";t.r(e);var n=t(0),r=t.n(n),n=t(499),a=t(501),i=t(54),l=t(1058),l=t.n(l),d=Object(i.a)(l.a),s=[{name:"01-base",title:Object(i.a)("Base \n Basic usage of TreeSelect."),component:t(1059).default,rawText:t(1060)},{name:"02-mutiple",title:Object(i.a)("Multiple \n Set multiple to Multiple choices."),component:t(1061).default,rawText:t(1062)},{name:"03-filter",title:Object(i.a)("Filter \n OnFilter is a function to filter data."),component:t(1063).default,rawText:t(1064)},{name:"03-h-advanced-filter",title:Object(i.a)("Advanced Filter \n In the advanced filter mode, you can switch between the filter results and the original data for the current level by pressing the button \n Set the onAdvancedFilter property to enable advanced filtering, only front-end filtering is supported"),component:t(1065).default,rawText:t(1066)},{name:"04-disabled",title:Object(i.a)("Disabled \n Set disabled to disabled item."),component:t(1067).default,rawText:t(1068)},{name:"05-loader",title:Object(i.a)("Lazy load \n Set the loader function to dynamic fetch data. This function is triggered when the undefined child node is expanded."),component:t(1069).default,rawText:t(1070)}];e.default=Object(n.a)(function(e){return r.a.createElement(a.b,Object.assign({},e,{codes:void 0,source:d,examples:s}))})},1058:function(e,t){e.exports="# TreeSelect\r\n\r\n<example />\r\n\r\n## API\r\n\r\n| Property | Type | Default | Description |\r\n| --- | --- | --- | --- |\r\n| width | number | null | width |\r\n| clearable | boolean | false | If clearable is true, show clear value icon |\r\n| multiple | boolean | false | if it is true, it will be multiple selection |\r\n| data | any[] | [] | data. The child node is children. If the children value is null or its length is 0, it is render as a leaf node. |\r\n| value | string \\| string[] | | In the Form, the value will be taken over by the form and the value will be invalid. |\r\n| defaultValue | string \\| string[] | | Initial value |\r\n| defaultExpanded | string[] | - | Default expanded node key. |\r\n| disabled | (data: object) => boolean \\| boolean | false | When it is true, all nodes disable the selection; when it is a function, it determines whether it is disabled according to the return result of the function. |\r\n| filterDelay | number | 400 | ms. The delay of user input triggering filter events |\r\n| name | string | - | The name of a Form that accesses data |\r\n| keygen | ((data: object) => string) \\| string \\| true | index | Generate a auxiliary method for each key<br />If not filled, index will be used(not recommended,there may be problems with more than 10 data)<br />When it is a function, use its return value.<br />When it is a string，ues the value of the string.For example, 'id' is the same thing as (d) => d.id. |\r\n| expanded | string[] | - | Expanded node key (controlled) |\r\n| loader | (key: string) => void | - | If the loader attribute is a function, the node with no children is regarded as dynamically loaded node. Click expanded button to trigger the loader event. The children property is null or its length is 0 will be regarded as a leaf node. |\r\n| mode | 0 \\| 1 \\| 2 \\| 3 | 1 | mode <br />0: Returns only the fully selected node including the parent node. <br />1: Returns all selected nodes and semi-selected nodes. <br />2: Return only the selected child nodes. <br />3: If the parent node is full selected, only return the parent node. |\r\n| onExpand | (expanded: string[]) => void | - | The callback function for expanding the node. The parameter is the key array of the currently expanded nodes. |\r\n| onChange | (value: string[]) => void | - | value is your picker now |\r\n| onFilter | (text: string) => (data: any) => boolean | - | When the onFilter is not empty, you can filter data by input.<br />If the onFilter returns a function, use this function as a front-end filter.<br />If return undefined, you can do your own backend filtering. |\r\n| renderItem | (data: object) => ReactNode | required | When it is a string, return d\\[string]<br />When it is a function, return the result of the function. |\r\n| renderResult | (data: object) => ReactNode | renderItem | The content displayed in the result after selecting, if not set, use renderItem |\r\n| compressed | boolean \\| 'no-repeat' | false | Merges selected values, valid only in multiselect mode; the first value will not appear in the Popover when it is'no-repeat'. |\r\n| absolute | boolean | false | When it is true, the pop-up layer of option append into document.body. |\r\n| zIndex | number | 1000 | options z-index |\r\n| childrenKey | string | 'children' | the key of the children data name | \r\n| defaultExpandAll | boolean | false | default expand all node |\r\n| showHitDescendants | boolean | false | Whether to show the descendant nodes of the hit node after filtering |\r\n| renderUnmatched | (data: any) => ReactNode | none | render unmatched value |\r\n| onCollapse | (collapse: boolean) => void | none | option collapse callback |\r\n| rules | any[] | null | Validation rules |\r\n| unmatch | boolean | none | render unmatch value |\r\n"},1059:function(r,e,t){"use strict";t.r(e),t.d(e,"default",function(){return n});var a=t(3),i=t(4),l=t(5),d=t(6),e=t(0),s=t.n(e),o=t(314),c=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]}],n=function(e){Object(l.a)(r,e);var n=Object(d.a)(r);function r(e){var t;return Object(a.a)(this,r),(t=n.call(this,e)).handleChange=function(e){t.setState({value:e})},t.state={value:""},t}return Object(i.a)(r,[{key:"render",value:function(){return s.a.createElement(o.a,{value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c})}}]),r}(s.a.Component)},1060:function(e,t){e.exports="/**\r\n * - Base\r\n *    -- Basic usage of TreeSelect.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: '',\r\n    }\r\n  }\r\n\r\n  handleChange = v => {\r\n    this.setState({\r\n      value: v,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TreeSelect\r\n        value={this.state.value}\r\n        onChange={this.handleChange}\r\n        clearable\r\n        style={{ width: 250 }}\r\n        keygen=\"id\"\r\n        renderItem={node => `node ${node.title}`}\r\n        data={data}\r\n      />\r\n    )\r\n  }\r\n}\r\n"},1061:function(r,e,t){"use strict";t.r(e),t.d(e,"default",function(){return n});var a=t(3),i=t(4),l=t(5),d=t(6),e=t(0),s=t.n(e),o=t(314),c=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]}],n=function(e){Object(l.a)(r,e);var n=Object(d.a)(r);function r(e){var t;return Object(a.a)(this,r),(t=n.call(this,e)).handleChange=function(e){t.setState({value:e})},t.state={value:[]},t}return Object(i.a)(r,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(o.a,{multiple:!0,value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250,marginBottom:15},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c}),s.a.createElement("br",null),s.a.createElement(o.a,{compressed:!0,multiple:!0,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c}))}}]),r}(s.a.Component)},1062:function(e,t){e.exports="/**\r\n * - Multiple\r\n *    -- Set multiple to Multiple choices.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: [],\r\n    }\r\n  }\r\n\r\n  handleChange = v => {\r\n    this.setState({\r\n      value: v,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TreeSelect\r\n          multiple\r\n          value={this.state.value}\r\n          onChange={this.handleChange}\r\n          clearable\r\n          style={{ width: 250, marginBottom: 15 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n        <br />\r\n        <TreeSelect\r\n          compressed\r\n          multiple\r\n          clearable\r\n          style={{ width: 250 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"},1063:function(r,e,t){"use strict";t.r(e),t.d(e,"default",function(){return h});var a=t(29),i=t(3),n=t(4),l=t(1),d=t(5),u=t(6),e=t(0),s=t.n(e),o=t(314),c=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"}]},{id:"4",title:"4",children:[{id:"4-1",title:"4-1"}]},{id:"5",title:"5",children:[{id:"5-1",title:"5-1"}]}],h=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).handleChange=function(e,t){n.setState(Object(a.a)({},e,t))},n.handleFilter=function(t){return function(e){return-1<e.title.indexOf(t)}},n.state={single:"",multiple:[]},n.handleChangeSingle=n.handleChange.bind(Object(l.a)(n),"single"),n.handleChangeMultiple=n.handleChange.bind(Object(l.a)(n),"multiple"),n}return Object(n.a)(r,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(o.a,{onFilter:this.handleFilter,value:this.state.single,onChange:this.handleChangeSingle,clearable:!0,style:{width:250,marginBottom:20},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c}),s.a.createElement("br",null),s.a.createElement(o.a,{multiple:!0,onFilter:this.handleFilter,value:this.state.multiple,onChange:this.handleChangeMultiple,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c}))}}]),r}(s.a.Component)},1064:function(e,t){e.exports="/**\r\n * - Filter\r\n *    -- OnFilter is a function to filter data.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  { id: '3', title: '3', children: [{ id: '3-1', title: '3-1' }] },\r\n  { id: '4', title: '4', children: [{ id: '4-1', title: '4-1' }] },\r\n  { id: '5', title: '5', children: [{ id: '5-1', title: '5-1' }] },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      single: '',\r\n      multiple: [],\r\n    }\r\n\r\n    this.handleChangeSingle = this.handleChange.bind(this, 'single')\r\n    this.handleChangeMultiple = this.handleChange.bind(this, 'multiple')\r\n  }\r\n\r\n  handleChange = (key, v) => {\r\n    this.setState({\r\n      [key]: v,\r\n    })\r\n  }\r\n\r\n  handleFilter = text => d => d.title.indexOf(text) > -1\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TreeSelect\r\n          onFilter={this.handleFilter}\r\n          value={this.state.single}\r\n          onChange={this.handleChangeSingle}\r\n          clearable\r\n          style={{ width: 250, marginBottom: 20 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n        <br />\r\n        <TreeSelect\r\n          multiple\r\n          onFilter={this.handleFilter}\r\n          value={this.state.multiple}\r\n          onChange={this.handleChangeMultiple}\r\n          clearable\r\n          style={{ width: 250 }}\r\n          keygen=\"id\"\r\n          renderItem={node => `node ${node.title}`}\r\n          data={data}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"},1065:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(314),l=[{value:"jiangsu",children:[{value:"nanjing",children:[{value:"jiangning"},{value:"gulou"}]},{value:"suzhou"}]},{value:"anhui",children:[{value:"hefei",children:[{value:"feidong"},{value:"feixi"}]},{value:"maanshan"}]}];t.default=function(){return a.a.createElement(i.a,{showHitDescendants:!0,onAdvancedFilter:function(t){return function(e){return-1<e.value.indexOf(t)}},clearable:!0,style:{width:250,marginBottom:20},keygen:"value",renderItem:"value",data:l})}},1066:function(e,t){e.exports="/**\r\n * - Advanced Filter\r\n *    -- In the advanced filter mode, you can switch between the filter results and the original data for the current level by pressing the button\r\n *    -- Set the onAdvancedFilter property to enable advanced filtering, only front-end filtering is supported\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    value: 'jiangsu',\r\n    children: [\r\n      {\r\n        value: 'nanjing',\r\n        children: [\r\n          {\r\n            value: 'jiangning',\r\n          },\r\n          {\r\n            value: 'gulou',\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        value: 'suzhou',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    value: 'anhui',\r\n    children: [\r\n      {\r\n        value: 'hefei',\r\n        children: [\r\n          {\r\n            value: 'feidong',\r\n          },\r\n          {\r\n            value: 'feixi',\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        value: 'maanshan',\r\n      },\r\n    ],\r\n  },\r\n]\r\n\r\nexport default () => (\r\n  <TreeSelect\r\n    showHitDescendants\r\n    onAdvancedFilter={text => d => d.value.indexOf(text) > -1}\r\n    clearable\r\n    style={{ width: 250, marginBottom: 20 }}\r\n    keygen=\"value\"\r\n    renderItem=\"value\"\r\n    data={data}\r\n  />\r\n)\r\n"},1067:function(r,e,t){"use strict";t.r(e),t.d(e,"default",function(){return n});var a=t(3),i=t(4),l=t(5),d=t(6),e=t(0),s=t.n(e),o=t(314),c=[{id:"1",title:"1",children:[{id:"1-1",title:"1-1",children:[{id:"1-1-1",title:"1-1-1"},{id:"1-1-2",title:"1-1-2"}]},{id:"1-2",title:"1-2"}]},{id:"2",title:"2",children:[{id:"2-1",title:"2-1"},{id:"2-2",title:"2-2"}]},{id:"3",title:"3",children:[{id:"3-1",title:"3-1"},{id:"3-2",title:"3-2"}]}],n=function(e){Object(l.a)(r,e);var n=Object(d.a)(r);function r(e){var t;return Object(a.a)(this,r),(t=n.call(this,e)).handleChange=function(e){t.setState({value:e})},t.state={value:""},t}return Object(i.a)(r,[{key:"render",value:function(){return s.a.createElement(o.a,{absolute:!0,disabled:function(e){return e.title.startsWith("2-")},value:this.state.value,onChange:this.handleChange,clearable:!0,style:{width:250},keygen:"id",renderItem:function(e){return"node ".concat(e.title)},data:c})}}]),r}(s.a.Component)},1068:function(e,t){e.exports="/**\r\n * - Disabled\r\n *    -- Set disabled to disabled item.\r\n */\r\nimport React from 'react'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst data = [\r\n  {\r\n    id: '1',\r\n    title: '1',\r\n    children: [\r\n      {\r\n        id: '1-1',\r\n        title: '1-1',\r\n        children: [\r\n          { id: '1-1-1', title: '1-1-1' },\r\n          { id: '1-1-2', title: '1-1-2' },\r\n        ],\r\n      },\r\n      { id: '1-2', title: '1-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '2',\r\n    title: '2',\r\n    children: [\r\n      { id: '2-1', title: '2-1' },\r\n      { id: '2-2', title: '2-2' },\r\n    ],\r\n  },\r\n  {\r\n    id: '3',\r\n    title: '3',\r\n    children: [\r\n      { id: '3-1', title: '3-1' },\r\n      { id: '3-2', title: '3-2' },\r\n    ],\r\n  },\r\n]\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: '',\r\n    }\r\n  }\r\n\r\n  handleChange = v => {\r\n    this.setState({\r\n      value: v,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <TreeSelect\r\n        absolute\r\n        disabled={v => v.title.startsWith('2-')}\r\n        value={this.state.value}\r\n        onChange={this.handleChange}\r\n        clearable\r\n        style={{ width: 250 }}\r\n        keygen=\"id\"\r\n        renderItem={node => `node ${node.title}`}\r\n        data={data}\r\n      />\r\n    )\r\n  }\r\n}\r\n"},1069:function(r,e,t){"use strict";t.r(e),t.d(e,"default",function(){return h});var a=t(3),n=t(4),i=t(5),l=t(6),e=t(0),d=t.n(e),s=t(45),o=t(314),c=["0","1","2","3","4"].map(function(e){return{id:e}}),u=0,h=function(e){Object(i.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).loader=function(t){setTimeout(function(){n.setState(Object(s.a)(function(e){e.data[parseInt(t,10)].children=Array(6).fill(0).map(function(){return{id:"-".concat(u++),children:[]}})}))},500)},n.handleChange=function(e){return n.setState({value:e})},n.renderItem=function(e){return"node ".concat(e.id)},n.state={data:c,value:[]},n}return Object(n.a)(r,[{key:"render",value:function(){return d.a.createElement(o.a,{multiple:!0,loader:this.loader,value:this.state.value,onChange:this.handleChange,keygen:"id",renderItem:this.renderItem,data:this.state.data})}}]),r}(e.Component)},1070:function(e,t){e.exports="/**\r\n * - Lazy load\r\n *    -- Set the loader function to dynamic fetch data. This function is triggered when the undefined child node is expanded.\r\n */\r\nimport React, { Component } from 'react'\r\nimport immer from 'immer'\r\nimport { TreeSelect } from 'megacosm'\r\n\r\nconst initData = ['0', '1', '2', '3', '4'].map(i => ({ id: i }))\r\n\r\nlet index = 0\r\nexport default class extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = { data: initData, value: [] }\r\n  }\r\n\r\n  loader = key => {\r\n    setTimeout(() => {\r\n      this.setState(\r\n        immer(draft => {\r\n          const { data } = draft\r\n          data[parseInt(key, 10)].children = Array(6)\r\n            .fill(0)\r\n            .map(() => ({ id: `-${index++}`, children: [] }))\r\n        })\r\n      )\r\n    }, 500)\r\n  }\r\n\r\n  handleChange = value => this.setState({ value })\r\n\r\n  renderItem = node => `node ${node.id}`\r\n\r\n  render() {\r\n    return (\r\n      <TreeSelect\r\n        multiple\r\n        loader={this.loader}\r\n        value={this.state.value}\r\n        onChange={this.handleChange}\r\n        keygen=\"id\"\r\n        renderItem={this.renderItem}\r\n        data={this.state.data}\r\n      />\r\n    )\r\n  }\r\n}\r\n"},314:function(n,o,e){"use strict";function c(e,t,n){return Object(E.isObject)(e)&&e.IS_NOT_MATCHED_VALUE?"function"==typeof n?n(e.value):Object(E.isObject)(e.value)?t(e.value):e.value:t(e)}var u=e(55),m=e(20),f=e(81),h=e(190),i=e(3),l=e(4),r=e(1),b=e(27),v=e(22),d=e(5),s=e(6),g=e(14),a=e(0),p=e.n(a),y=e(135),O=e(19),j=e(21),t=e(16),k=e.n(t),C=e(25),x=e(35),E=e(10),t=function(e){Object(d.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(i.a)(this,n),(e=t.call(this,e)).bindElement=e.bindElement.bind(Object(r.a)(e)),e.handleInput=e.handleInput.bind(Object(r.a)(e)),e.props.setInputReset(e.reset.bind(Object(r.a)(e))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.focus&&this.focus()}},{key:"shouldComponentUpdate",value:function(){return this.props.updatAble}},{key:"componentDidUpdate",value:function(e){this.props.focus!==e.focus&&this.props.focus&&this.focus()}},{key:"reset",value:function(){this.editElement&&(this.editElement.innerText=""),this.blurTimer&&clearTimeout(this.blurTimer)}},{key:"focus",value:function(){C.focusElement.select(this.editElement)}},{key:"bindElement",value:function(e){this.editElement=e}},{key:"handleInput",value:function(e){this.props.onFilter(e.target.innerText.replace("\feff ","").trim())}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.focus,e=e.multiple,t="string"==typeof t?t.replace(/<\/?[^>]*>/g,""):t;return Object(a.isValidElement)(t)?Object(a.cloneElement)(t,{className:Object(h.a)("input"),ref:this.bindElement,key:"input",onInput:this.handleInput,contentEditable:n}):p.a.createElement("span",{key:"input",className:Object(h.a)("input",!e&&"full"),ref:this.bindElement,contentEditable:n,onPaste:C.preventPasteFile,onInput:this.handleInput,onBlur:this.handleBlur,dangerouslySetInnerHTML:{__html:t}})}}]),n}(a.Component),I=(t.defaultProps={text:"",updatAble:!1},t),w=e(120),S=e(172);function T(e){var t=e.content,n=e.data,r=e.disabled,a=e.onClick,e=e.only,i=n,n=r||!a?void 0:function(){return a(i)},l=r||!n;return p.a.createElement("a",{tabIndex:-1,className:Object(h.a)("item",r&&"disabled",l&&"ban",e&&"item-only")},t,!l&&p.a.createElement("span",{className:Object(h.a)("indicator","close"),onClick:n}))}function R(e,t){return e.getAttribute("data-id")===t||!!e.parentElement&&R(e.parentElement,t)}var F=function(e){Object(d.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(i.a)(this,n),(e=t.call(this,e)).state={more:-1},e.handleRemove=e.handleRemove.bind(Object(r.a)(e)),e.handelMore=e.handelMore.bind(Object(r.a)(e)),e.bindResult=e.bindResult.bind(Object(r.a)(e)),e.resetMore=e.resetMore.bind(Object(r.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.compressed&&(this.cancelResizeObserver=Object(C.addResizeObserver)(this.resultEl,this.resetMore))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.result,r=t.compressed,t=t.onFilter;r&&(e.result.join("")!==n.join("")?this.resetMore():n.length&&this.shouldResetMore&&(this.shouldResetMore=!1,this.state.more=Object(S.b)(t,this.resultEl,this.resultEl.querySelectorAll(".".concat(Object(h.a)("item")))),this.forceUpdate()))}},{key:"componentWillUnmount",value:function(){this.cancelResizeObserver&&this.cancelResizeObserver()}},{key:"bindResult",value:function(e){this.resultEl=e}},{key:"resetMore",value:function(){this.props.compressed&&(this.shouldResetMore=!0,this.state.more=-1,this.forceUpdate())}},{key:"handleRemove",value:function(){this.props.onRemove.apply(void 0,arguments)}},{key:"handelMore",value:function(e){this.setState({more:e})}},{key:"renderClear",value:function(){var e=this.props,t=e.onClear,n=e.result,e=e.disabled;return t&&0<n.length&&!0!==e?p.a.createElement("a",{tabIndex:-1,"data-role":"close",className:Object(h.a)("indicator","close"),onClick:t}):null}},{key:"renderInput",value:function(e){var t=this.props,n=t.multiple,r=t.onFilter,a=t.focus,t=t.setInputReset;return p.a.createElement(I,{key:"".concat(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"input",".").concat(a?1:0),updatAble:!n,multiple:n,focus:a,text:e,onFilter:r,setInputReset:t})}},{key:"renderItem",value:function(e,t){var n=this.props,r=n.renderResult,a=n.renderUnmatched,n=n.datum,r=c(e,r,a);if(null===r)return null;a=this.state.more;return p.a.createElement(T,{only:1===a,key:t,content:r,data:e,disabled:n.disabled(e),onClick:this.handleRemove})}},{key:"renderMore",value:function(e){var t=this.props.compressed,n=this.state.more;return[p.a.createElement(S.a,{key:"more",className:Object(h.a)("item","item-compressed"),popoverClassName:Object(h.a)("popover"),contentClassName:Object(h.a)("result"),compressed:t,data:e,cls:h.a,showNum:n})]}},{key:"renderPlaceholder",value:function(){var e=this.props,t=e.focus,e=e.onFilter;return t&&e?this.renderInput(" "):p.a.createElement("span",{className:k()(Object(x.a)("placeholder"),Object(h.a)("ellipsis"))},this.props.placeholder," ")}},{key:"renderResult",value:function(){var n=this,e=this.props,t=e.multiple,r=e.compressed,a=e.result,i=e.renderResult,l=e.renderUnmatched,d=e.onFilter,s=e.focus,e=e.filterText;return t?(t=a.map(function(e,t){return n.renderItem(e,t)}).filter(function(e){return!Object(E.isEmpty)(e)}),r&&(t=this.renderMore(t)),s&&d&&t.push(this.renderInput(e,a.length)),t):d?this.renderInput(c(a[0],i,l)):p.a.createElement("span",{className:Object(h.a)("ellipsis")},c(a[0],i,l))}},{key:"render",value:function(){var e=0===this.props.result.length,t=e?this.renderPlaceholder():this.renderResult(),n=this.props.compressed;return p.a.createElement("div",{ref:this.bindResult,className:Object(h.a)("result",n&&"compressed",e&&"empty")},t,!this.props.multiple&&p.a.createElement("a",{tabIndex:-1,className:Object(h.a)("indicator","caret")},p.a.createElement(w.a,null)),this.renderClear())}}]),n}(a.PureComponent),t=e(96),A=e(34),D=e(66),M=e(36),N=e(15),B=["focus"],P=Object(D.a)(["fade","scale-y"],"fast"),U=Object(t.a)(function(e){var t=e.focus,e=Object(g.a)(e,B);return p.a.createElement(P,Object.assign({show:t},e))}),D=function(e){Object(d.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(i.a)(this,n),(e=t.call(this,e)).state={focus:!1,position:"drop-down"},e.treeSelectId="treeSelect_".concat(Object(j.c)()),e.onExpandHandler=e.onExpandHandler.bind(Object(r.a)(e)),e.getResetPosition=e.getResetPosition.bind(Object(r.a)(e)),e.setInputReset=e.setInputReset.bind(Object(r.a)(e)),e.renderActive=e.renderActive.bind(Object(r.a)(e)),e.handleChange=e.handleChange.bind(Object(r.a)(e)),e.renderItem=e.renderItem.bind(Object(r.a)(e)),e.bindElement=e.bindElement.bind(Object(r.a)(e)),e.handleClick=e.handleState.bind(Object(r.a)(e),!0),e.handleFocus=e.handleFocus.bind(Object(r.a)(e)),e.handleKeyDown=e.handleKeyDown.bind(Object(r.a)(e)),e.handleBlur=e.handleState.bind(Object(r.a)(e),!1),e.handleClear=e.handleClear.bind(Object(r.a)(e)),e.handleRemove=e.handleRemove.bind(Object(r.a)(e)),e.handleClickAway=e.handleClickAway.bind(Object(r.a)(e)),e.shouldFocus=e.shouldFocus.bind(Object(r.a)(e)),e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.onFilter,a=n.datum,n=n.mode;a.mode=n,t.focus!==this.state.focus&&!this.state.focus&&r&&setTimeout(function(){r("")},400)}},{key:"componentWillUnmount",value:function(){Object(b.a)(Object(v.a)(n.prototype),"componentWillUnmount",this).call(this),this.clearClickAway()}},{key:"onExpandHandler",value:function(){var e,t=this;this.resetAbsoluteListPosition&&setTimeout(function(){t.resetAbsoluteListPosition(!0)}),this.props.onExpand&&(e=this.props).onExpand.apply(e,arguments)}},{key:"getText",value:function(e){return this.props.empty||Object(M.a)(e)}},{key:"setInputReset",value:function(e){this.inputReset=e}},{key:"getValue",value:function(){var e=this.props,t=e.datum,e=e.multiple,t=t.getValue();return e?t:t.length?t[0]:""}},{key:"getResetPosition",value:function(e){this.resetAbsoluteListPosition=e}},{key:"bindElement",value:function(e){this.element=e}},{key:"shouldFocus",value:function(e){return e.getAttribute("data-id")===this.treeSelectId||!!Object(C.getParent)(e,".".concat(Object(h.a)("result")))}},{key:"bindClickAway",value:function(){document.addEventListener("mousedown",this.handleClickAway)}},{key:"clearClickAway",value:function(){document.removeEventListener("mousedown",this.handleClickAway)}},{key:"handleClickAway",value:function(e){R(e.target,this.treeSelectId)||(this.clearClickAway(),this.props.onBlur(),this.handleState(!1,e))}},{key:"handleState",value:function(e,t){var n,r;!0!==this.props.disabled&&e!==this.state.focus&&(e&&t&&t.target.classList.contains(Object(h.a)("close"))||(n=(t=this.props).height,t=t.onCollapse,r=this.props.position,A.docSize.height<n+this.element.getBoundingClientRect().bottom&&!r&&(r="drop-up"),t&&t(e),this.setState({focus:e,position:r||"drop-down"}),e&&this.bindClickAway()))}},{key:"handleFocus",value:function(e){this.shouldFocus(e.target)&&(this.props.onFocus(e),this.bindClickAway())}},{key:"handleKeyDown",value:function(e){var t=this.props.onEnterExpand;if(13===e.keyCode&&(e.preventDefault(),!this.state.focus)){if("function"==typeof t)if(!1===t(e))return;this.handleState(!0)}9===e.keyCode&&(this.props.onBlur(),this.state.focus?this.handleState(!1,e,!0):this.clearClickAway())}},{key:"handleRemove",value:function(e){var t=this.props.datum;t.set(t.getKey(e),0),this.handleChange()}},{key:"handleChange",value:function(e,t){var n=this.props,r=n.datum,a=n.multiple,i=n.disabled,n=n.onChange;!0===i||r.isDisabled(t)||(i=r.getDataById(t),a||(r.setValue([]),r.set(r.getKey(e),1),this.handleState(!1)),n(this.getValue(),i,t&&r.getPath(t).path))}},{key:"handleClear",value:function(){var e=this.props.multiple;this.props.datum.setValue([]),this.props.onChange(e?[]:""),this.handleState(!1),this.element.focus()}},{key:"renderItem",value:function(e,t){var n;return"function"==typeof(n=this.props.renderItem)?n(e,t):e[n]}},{key:"renderActive",value:function(e,t,n,r){var a=this.props,i=a.renderItem,a=a.datum,t="function"==typeof i?i(e,t,n,r):e[i];return p.a.createElement("span",{title:"string"==typeof t?t:void 0,className:Object(h.a)("content-wrapper",n&&"selected",a.isDisabled(a.getKey(e))&&"disabled")},t)}},{key:"renderTreeOptions",value:function(){var t=this,e=this.state,n=e.focus,e=e.position,r=this.props,a=r.multiple,i=r.datum,l=r.data,d=r.absolute,s=r.height,r=r.zIndex,o={},i=(["mode","data","datum","defaultExpanded","defaultExpandAll","disabled","expanded","keygen","loader","onExpand","renderItem","line","parentClickExpand","childrenKey","expandIcons"].forEach(function(e){o[e]=t.props[e]}),o.value=i.getValue(),a?o.onChange=this.handleChange:(o.onClick=this.handleChange,o.renderItem=this.renderActive,o.active=o.value.length?o.value[0]:null),0===l.length?p.a.createElement("span",{className:Object(h.a)("option")},this.getText("noData")):p.a.createElement(y.a,Object.assign({className:Object(h.a)(!a&&"single")},o,{dataUpdate:!1,onExpand:this.onExpandHandler})));return p.a.createElement(U,{getResetPosition:this.getResetPosition,absolute:d,rootClass:Object(h.a)(e,Object(N.b)()&&"rtl"),parentElement:this.element,position:e,focus:n,"data-id":this.treeSelectId,className:Object(h.a)("options"),style:{maxHeight:s,overflowY:"auto"},fixed:"min",zIndex:r},p.a.createElement("div",{className:Object(h.a)("tree-wrapper")},i))}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.onFilter,r=e.compressed,a=e.multiple,i=e.datum,l=e.clearable,d=e.disabled,s=e.size,o=e.filterText,c=e.result,e=e.renderUnmatched,s=Object(h.a)("inner",s,this.state.focus&&"focus",this.state.position,a&&"multiple",!0===d&&"disabled"),u=this.props.renderResult||this.renderItem;return p.a.createElement("div",{tabIndex:!0===d?-1:0,ref:this.bindElement,className:s,"data-id":this.treeSelectId,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onClick:this.handleClick},p.a.createElement(F,{filterText:o,onClear:l?this.handleClear:void 0,onRemove:this.handleRemove,onFilter:n,result:c,disabled:d,datum:i,focus:this.state.focus,multiple:a,placeholder:t,renderResult:u,setInputReset:this.setInputReset,compressed:r,renderUnmatched:e}),this.renderTreeOptions())}}]),n}(O.b),V=(D.defaultProps={clearable:!1,compressed:!1,absolute:!1,multiple:!1,line:!1,renderItem:function(e){return e},height:300,data:[],defaultExpanded:[]},e(29)),K=e(93),z=["data","onFilter","expanded","showHitDescendants"],H=e(13),W=e(111),L=e(38);function _(e){return e?Array.isArray(e)?e:[e]:[]}t=e(174),e=e(92),m=Object(m.compose)(u.a,Object(f.a)({className:Object(h.a)("_"),tag:"div"}),function(a){var e=function(e){Object(d.a)(r,e);var n=Object(s.a)(r);function r(e){var t;return Object(i.a)(this,r),(t=n.call(this,e)).datum=new W.a({data:e.data,loader:e.loader,keygen:e.keygen,mode:e.mode,value:_(e.value),onChange:e.onChange,disabled:"function"==typeof e.disabled?e.disabled:void 0,childrenKey:e.childrenKey,unmatch:e.unmatch}),t}return Object(l.a)(r,[{key:"componentDidUpdate",value:function(e){Object(L.b)(e.data,this.props.data)||(this.datum.setData(this.props.data),this.forceUpdate())}},{key:"render",value:function(){var e=this.props.value,t=Object(H.a)(Object(H.a)({},this.props),{},{datum:this.datum});return Object(L.b)(_(e),this.datum.getValue())||this.datum.setValue(_(e)),p.a.createElement(a,t)}}]),r}(p.a.Component);return e.defaultProps={mode:1,childrenKey:"children"},e},t.a,function(c){var e=function(e){Object(d.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(i.a)(this,n),(e=t.call(this,e)).state={innerFilter:void 0,innerData:void 0,filterText:""},e.handleFilter=e.handleFilter.bind(Object(r.a)(e)),e.getResultByValues=e.getResultByValues.bind(Object(r.a)(e)),e.resultCache=new Map,e}return Object(l.a)(n,[{key:"getResultByValues",value:function(){var r=this,e=this.props,a=e.datum,i=e.noCache,e=e.renderUnmatched,t=a.getValue()||[],l=(e&&(t=t.concat([].concat(this.props.value).filter(function(e){return e&&-1===t.indexOf(e)}))),[]);return t.forEach(function(e){var t,n=i?void 0:r.resultCache.get(e);n||((n=a.getDataById(e))&&!i?r.resultCache.set(e,n):n||(t={},Object(V.a)(t,"IS_NOT_MATCHED_VALUE",!0),Object(V.a)(t,"value",e),n=t)),n&&l.push(n)}),l}},{key:"handleFilter",value:function(t){var n=this,e=this.props,r=e.filterDelay,a=e.onFilter;if(!t)return this.setState({filterText:"",innerFilter:void 0,innerData:void 0}),this.timer&&clearTimeout(this.timer),void(a&&a(t));a&&(this.setState({filterText:t}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){var e=a(t);"function"==typeof e&&n.setState({innerFilter:e})},r))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.data,a=n.onFilter,i=n.expanded,l=n.showHitDescendants,n=Object(g.a)(n,z),d=this.state,s=d.innerFilter,d=d.filterText,a=a?this.handleFilter:void 0,o=r;return s&&(e=[],o=Object(K.getFilterTree)(r,s,e,function(e){return t.props.datum.getKey(e)},n.childrenKey,l,void 0,{advanced:n.onAdvancedFilter}),i=e),p.a.createElement(c,Object.assign({},n,{filterText:d,result:this.getResultByValues(),data:o,rawData:r,onFilter:a,expanded:i}))}}]),n}(O.a);return e.defaultProps={data:[],filterDelay:300,showHitDescendants:!1},e},Object(t.b)({}),e.b)(D);m.displayName="MegacosmTreeSelect",o.a=m}}]);